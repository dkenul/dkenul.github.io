<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>JS Test</title>
  <script src="https://code.jquery.com/jquery-2.1.3.min.js" type="application/javascript"></script>
</head>
<body>
  <div class="main-pane">
    <h2>Word Translator</h2>
    <p>
      Welcome! This is a word translation tool. You provide the source words and the words that they
      should be translated to, and the website does the rest! The translator already knows some words,
      but it's important to remember that any words you teach it will be forgotten when the page is
      refreshed.
    </p>
    <div>
      Source word: <input type="text" id="source-word" placeholder="party"/>
      Translation word: <input type="text" id="translation-word" placeholder="fiesta">
      <input type="button" id="learn-translate" value="Learn Translation!"/>
    </div>
    <h4>Translator</h4>
    <p>
      You can enter a sentence into the textbox below in order to use the known
      translations to translate a sentence.
    </p>
    <textarea name="translate-box" id="translate-box" cols="50" rows="10" placeholder="Enter the sentence to translate here!"></textarea>
    <p><span id="translation-result">And your translation will appear here!</span></p>
  </div>
  <div class="dictionary-pane">
    <h2>Known Translations:</h2>
    <p>
      These are all the words I know!
      They're in the form of "known word" -> "translation" in the list below.
    </p>
    <p>Hint: click on the "remove" link next a known to remove a known translation</p>
    <ul id="known-translations"></ul>
  </div>
â€‹
</body>
<style type="text/css">
  .main-pane {
    float: left;
    width: 75%;
  }
  .dictionary-pane {
    float: right;
    width: 25%;
  }
</style>
<script type="application/javascript">
  "use strict";
  (function(){

    var knownWords = {
      one: "uno",
      two: "dos",
      three: "tres",
      four: "cuatro",
      five: "cinco",
      six: "seis",
      seven: "siete",
      eight: "ocho",
      nine: "nueve",
      ten: "diez"
    };

    Object.keys(knownWords).forEach(function(key, i) {
      var enWord = key;
      var spWord = knownWords[key];
      var li = $('<li/>');

      li.append(
        $('<span/>').text(enWord + " -> " + spWord),
        $('<span/>').addClass('rm-button').text('remove').css(
          {'margin-left': "10px", background: "red", color: "white", cursor: "pointer", "font-weight": "bold"}
        ).data("key", enWord).click(function() {
          delete knownWords[$(this).data("key")];
          $(this).parent().remove();
        })
      );

      $('#known-translations').append(li);
    });

    $('#learn-translate').click(function() {
      var enWord = $('#source-word');
      var spWord = $('#translation-word');

      if (enWord.val().length > 0 && spWord.val().length > 0) {
        knownWords[enWord.val()] = spWord.val();

        var li = $('<li/>')

        li.append(
          $('<span/>').text(enWord.val() + " -> " + spWord.val()),
          $('<span/>').addClass('rm-button').text('remove').css(
            {'margin-left': "10px", background: "red", color: "white", cursor: "pointer", "font-weight": "bold"}
          ).data("key", enWord.val()).click(function() {
            delete knownWords[$(this).data("key")];
            $(this).parent().remove();
          })
        );

        $('#known-translations').append(li)
      }

      enWord.val('');
      spWord.val('');
    })

    $("#translate-box").on("input", function () {
      var target = $("#translation-result");
      var words = $(this).val().split(' ');
      var result = [];

      words.forEach(function(word) {
        if (knownWords[word]) {
          result.push(knownWords[word]);
        } else {
          result.push("unknown");
        }
      });

      target.text(result.join(' '));
    });
  })();
</script>
</html>
